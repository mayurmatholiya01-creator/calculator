<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tiles Live Calculator (ft² ↔ pcs, tons)</title>
  <style>
    :root {
      --bg:#0b1020; --card:#0e1627; --ink:#e5e7eb; --muted:#94a3b8;
      --accent:#22c55e; --accent2:#16a34a; --stroke:rgba(148,163,184,.22);
      --glass:rgba(17,24,39,.7);
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 600px at 20% -20%,#0f1b3a 0%,transparent 60%),linear-gradient(135deg,#0b1020,#0b1020);color:var(--ink);font-family:system-ui,Segoe UI,Roboto,Arial}
    .wrap{max-width:900px;margin:28px auto;padding:12px}
    .topbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .brand{font-weight:600;letter-spacing:.3px}
    .chip{font-size:12px;color:#c7d2fe;background:rgba(99,102,241,.1);border:1px solid rgba(99,102,241,.25);padding:6px 10px;border-radius:999px}
    .card{background:var(--glass);border:1px solid var(--stroke);border-radius:16px;padding:16px;backdrop-filter: blur(6px)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    .col-6{grid-column:span 6} .col-12{grid-column:span 12} .col-4{grid-column:span 4} .col-8{grid-column:span 8}
    label{font-size:13px;color:#cbd5e1;margin-bottom:6px;display:block}
    select,input{width:100%;padding:12px;border-radius:12px;border:1px solid var(--stroke);background:#0b1220;color:var(--ink);outline:none}
    input[type=number]{appearance:textfield}
    .seg{display:inline-flex;border:1px solid var(--stroke);border-radius:12px;overflow:hidden;background:#0b1220}
    .seg button{all:unset;cursor:pointer;padding:10px 14px;color:#cbd5e1}
    .seg .on{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#052e16;font-weight:600}
    .out{margin-top:12px;padding:14px;border-radius:14px;background:#0b1220;border:1px dashed rgba(148,163,184,.35)}
    .kpi{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    .k{background:#0a1426;border:1px solid rgba(148,163,184,.2);border-radius:14px;padding:12px}
    .t{font-size:12px;color:#a5b4fc} .v{font-size:20px;margin-top:4px}
    .meta{color:var(--muted);font-size:13px}
    @media (max-width:760px){
      .col-6,.col-12,.col-4,.col-8{grid-column:span 12}
      .kpi{grid-template-columns:repeat(2,1fr)}
    }
  </style>
</head>
<body>
<div class="wrap">
  <div class="topbar">
    <div class="brand">Tiles Calculator</div>
    <div class="chip">Live mode</div>
  </div>

  <div class="card">
    <div class="grid">
      <div class="col-6">
        <label>Size</label>
        <select id="size"></select>
      </div>
      <div class="col-6">
        <label>Thickness</label>
        <select id="thk"></select>
      </div>

      <div class="col-12">
        <label>Mode</label>
        <div class="seg" id="seg">
          <button id="btnArea" class="on">Area (ft²)</button>
          <button id="btnPcs">Pieces</button>
        </div>
      </div>

      <div class="col-8">
        <label id="valLabel">Area (ft²)</label>
        <input id="val" type="number" min="0" step="0.01" inputmode="decimal" placeholder="e.g. 2000" />
      </div>
      <div class="col-4">
        <label>Quick actions</label>
        <div class="seg" style="display:flex;justify-content:flex-start;width:auto">
          <button id="q2">Clear</button>
        </div>
      </div>
    </div>

    <div class="out">
      <div class="meta" id="meta">-</div>
      <div class="kpi" style="margin-top:10px">
        <div class="k"><div class="t">Pieces</div><div class="v" id="pcsOut">-</div></div>
        <div class="k"><div class="t">Area (ft²)</div><div class="v" id="ft2Out">-</div></div>
        <div class="k"><div class="t">Area (m²)</div><div class="v" id="m2Out">-</div></div>
        <div class="k"><div class="t">Weight (tons)</div><div class="v" id="tonsOut">-</div></div>
      </div>
    </div>
  </div>
</div>

<script>
// MASTER from sheet (PCS=pieces/box; ft2,m2,kg are per box)
const MASTER = [
  {size:"1200x1200",thk:"9MM",pcs:2,kg:"61",ft2:31.0,m2:2.88},
  {size:"1200x1790",thk:"9MM",pcs:2,kg:"91",ft2:46.242,m2:4.296},
  {size:"1200x1800",thk:"9MM",pcs:2,kg:"91 TO 96.5",ft2:46.5,m2:4.32},
  {size:"1200x2400",thk:"9MM",pcs:1,kg:"62",ft2:31.0,m2:2.88},
  {size:"1200x2800",thk:"6MM",pcs:1,kg:"50.5",ft2:36.167,m2:3.36},
  {size:"1200x3180",thk:"15MM",pcs:1,kg:"136",ft2:41.075,m2:3.816},
  {size:"1200x3200",thk:"15MM",pcs:1,kg:"136",ft2:41.337,m2:3.84},
  {size:"1600x1600",thk:"9MM",pcs:1,kg:"55",ft2:27.556,m2:2.56},
  {size:"1600x3200",thk:"6MM",pcs:1,kg:"74",ft2:55.116,m2:5.12},
  {size:"1600x3200",thk:"12MM",pcs:1,kg:"148",ft2:55.116,m2:5.12},
  {size:"1620x3240",thk:"12MM",pcs:1,kg:"150",ft2:56.5,m2:5.249},
  {size:"790x2980",thk:"15MM",pcs:1,kg:"87",ft2:25.338,m2:2.354},
  {size:"800x3000",thk:"15MM",pcs:1,kg:"84.5",ft2:25.834,m2:2.4},
  {size:"800x2400",thk:"15MM",pcs:1,kg:"67.5",ft2:20.67,m2:1.9},
  {size:"1000x3000",thk:"5MM",pcs:1,kg:"35.5",ft2:32.29,m2:3.0},
  {size:"1200x2600",thk:"6MM",pcs:1,kg:"42.5",ft2:33.58,m2:3.1},
  {size:"1200x3000",thk:"9MM",pcs:1,kg:"77.5",ft2:38.75,m2:3.6},
  {size:"1200x3200",thk:"15MM",pcs:1,kg:"136",ft2:41.33,m2:3.8},
  {size:"800x3200",thk:"15MM",pcs:1,kg:"74",ft2:27.56,m2:2.6},
];

const FT2_PER_M2 = 10.7639;
const fmt0 = new Intl.NumberFormat('en-IN');
const fmt2 = new Intl.NumberFormat('en-IN',{minimumFractionDigits:2,maximumFractionDigits:2});
const fmt3 = new Intl.NumberFormat('en-IN',{minimumFractionDigits:3,maximumFractionDigits:3});
const el = id => document.getElementById(id);
const parseKgMin = v => {
  const nums = (""+v).match(/[\d.]+/g);
  return nums && nums.length ? parseFloat(nums[0]) : NaN;
};

let mode = 'area'; // 'area' or 'pcs'

function initSize() {
  const sizes = [...new Set(MASTER.map(r=>r.size))].sort();
  el('size').innerHTML = sizes.map(s=>`<option value="${s}">${s}</option>`).join('');
}
function initThk() {
  const thks = [...new Set(MASTER.filter(r=>r.size===el('size').value).map(r=>r.thk))];
  el('thk').innerHTML = thks.map(t=>`<option value="${t}">${t}</option>`).join('');
}
function findSKU(){
  const sz = el('size').value, th = el('thk').value;
  return MASTER.find(r=>r.size===sz && r.thk===th) || null;
}

function recalc(){
  const sku = findSKU();
  const val = parseFloat(el('val').value);
  if (!sku){
    ['pcsOut','ft2Out','m2Out','tonsOut','meta'].forEach(id=>el(id).textContent='-');
    return;
  }
  const pcsPerBox = sku.pcs;
  const ft2PerPc = sku.ft2 / pcsPerBox;
  const m2PerPc  = sku.m2  / pcsPerBox;
  const kgPerPc  = parseKgMin(sku.kg) / pcsPerBox;

  let pcs=0, ft2=0, m2=0, tons=0;
  if (val>0){
    if (mode==='area'){
      ft2 = val;
      pcs = Math.ceil(ft2 / ft2PerPc);
      m2  = ft2 / FT2_PER_M2;
    } else {
      pcs = Math.ceil(val);
      ft2 = pcs * ft2PerPc;
      m2  = pcs * m2PerPc;
    }
    const totalKg = pcs * kgPerPc;
    tons = totalKg / 1000;
  }

  el('pcsOut').textContent  = pcs ? fmt0.format(pcs) : '-';
  el('ft2Out').textContent  = ft2 ? fmt2.format(ft2) : '-';
  el('m2Out').textContent   = m2  ? fmt3.format(m2)  : '-';
  el('tonsOut').textContent = tons? fmt3.format(tons): '-';
  el('meta').textContent = `${sku.size} • ${sku.thk} • ${pcsPerBox} pcs/box • ${sku.ft2} ft²/box • ${sku.m2} m²/box • ~${parseKgMin(sku.kg)} kg/box`;
}

function setMode(next){
  mode = next;
  el('btnArea').classList.toggle('on', mode==='area');
  el('btnPcs').classList.toggle('on',  mode==='pcs');
  el('valLabel').textContent = mode==='area' ? 'Area (ft²)' : 'Pieces';
  el('val').placeholder = mode==='area' ? 'e.g. 2000' : 'e.g. 25';
  recalc();
}

function bootstrap(){
  initSize();
  const sizeSel = el('size');
  const idx = [...sizeSel.options].findIndex(o=>o.value==="800x3000");
  if (idx>=0) sizeSel.selectedIndex = idx;
  initThk();
  const thkSel = el('thk');
  const tIdx = [...thkSel.options].findIndex(o=>o.value==="15MM");
  if (tIdx>=0) thkSel.selectedIndex = tIdx;
  setMode('area');
}

el('size').addEventListener('input', ()=>{ initThk(); recalc(); });
el('thk').addEventListener('input', recalc);
el('val').addEventListener('input', recalc);      // live updates
el('btnArea').addEventListener('click', ()=>setMode('area'));
el('btnPcs').addEventListener('click',  ()=>setMode('pcs'));
el('q2').addEventListener('click',  ()=>{ el('val').value=''; recalc(); });

bootstrap();
</script>
</body>
</html>
