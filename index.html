<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  
  <!-- PWA Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="theme-color" content="#0a0a0b" />
  
  <title>TilesPro Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #6366f1;
      --primary-light: #818cf8;
      --secondary: #06b6d4;
      --accent: #ec4899;
      --bg: #0a0a0b;
      --glass: rgba(255,255,255,0.05);
      --glass-border: rgba(255,255,255,0.1);
      --text: #ffffff;
      --text-secondary: #a1a1aa;
      --border-radius: 16px;
      --border-radius-sm: 12px;
      --safe-top: env(safe-area-inset-top);
      --safe-bottom: env(safe-area-inset-bottom);
      --safe-left: env(safe-area-inset-left);
      --safe-right: env(safe-area-inset-right);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html {
      padding: var(--safe-top) var(--safe-right) var(--safe-bottom) var(--safe-left);
      min-height:100dvh;
      background: var(--bg);
    }
    body {
      font-family:'Inter',sans-serif;
      display:flex;
      align-items:center;
      justify-content:center;
      background: var(--bg);
      color: var(--text);
      min-height:100dvh;
      overflow-x:hidden;
    }
    .orb{position:fixed;border-radius:50%;opacity:0.3;filter:blur(40px);animation:float 20s infinite linear;pointer-events:none}
    .orb:nth-child(1){width:200px;height:200px;background:linear-gradient(135deg,var(--primary),var(--secondary));top:10%;left:-5%}
    .orb:nth-child(2){width:150px;height:150px;background:linear-gradient(135deg,var(--accent),var(--primary));bottom:10%;right:-5%}
    @keyframes float{0%,100%{transform:translateY(0)rotate(0)}33%{transform:translateY(-20px)rotate(120deg)}66%{transform:translateY(20px)rotate(240deg)}}

    .card {
      width:100%;
      max-width:400px;
      background:var(--glass);
      backdrop-filter:blur(20px);
      border:1px solid var(--glass-border);
      border-radius:var(--border-radius);
      padding:1.5rem;
      box-shadow:0 25px 50px -12px rgba(0,0,0,0.5);
    }
    .form-row{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem}
    .form-group.full{grid-column:span 2}
    .form-label{font-size:0.9rem;color:var(--text-secondary);margin-bottom:0.4rem;display:block}
    .form-select, .form-input{
      width:100%;padding:0.8rem;border-radius:var(--border-radius-sm);
      border:1px solid rgba(255,255,255,0.08);
      background:rgba(255,255,255,0.03);color:var(--text);
      outline:none;font-size:1rem;
    }
    .form-select:focus,.form-input:focus{border-color:var(--primary);background:rgba(255,255,255,0.05)}

    .mode-toggle{display:flex;background:rgba(255,255,255,0.03);border-radius:var(--border-radius-sm);overflow:hidden}
    .mode-option{flex:1;padding:0.7rem;cursor:pointer;text-align:center;color:var(--text-secondary);font-weight:500;position:relative;z-index:2}
    .mode-toggle::after{content:'';position:absolute;top:4px;left:4px;bottom:4px;width:calc(50%-8px);background:var(--primary);border-radius:calc(var(--border-radius-sm)-4px);transition:transform 0.3s}
    .mode-option.active{color:var(--text)}.mode-toggle.pieces::after{transform:translateX(100%)}
    
    .actions{display:grid;grid-template-columns:1fr 1fr;gap:0.8rem;margin-bottom:1rem}
    .btn{padding:0.8rem;border:none;border-radius:var(--border-radius-sm);font-weight:600;display:flex;align-items:center;justify-content:center;gap:0.4rem;cursor:pointer;transition:background 0.2s}
    .btn-whatsapp{background:#25D366;color:#000} .btn-whatsapp:hover{background:#1DA851}
    .btn-sms{background:#06b6d4;color:#000} .btn-sms:hover{background:#059cbf}
    .btn-email{background:#ec4899;color:#000} .btn-email:hover{background:#db2777}
    .btn img{width:20px;height:20px filter:invert(1)}

    .results{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem}
    .result{background:rgba(255,255,255,0.03);border-radius:var(--border-radius-sm);padding:1rem;text-align:center}
    .label{font-size:0.75rem;color:var(--text-secondary);text-transform:uppercase}
    .value{font-size:1.4rem;font-weight:600}

    .meta{text-align:center;font-size:0.75rem;color:var(--text-secondary)}

    .copy-msg{position:fixed;top:calc(10px + var(--safe-top));left:50%;transform:translateX(-50%) translateY(-100px);background:rgba(16,185,129,0.9);padding:0.6rem 1rem;border-radius:var(--border-radius-sm);color:#fff;transition:transform 0.3s,opacity 0.3s;opacity:0}
    .copy-msg.show{opacity:1;transform:translateX(-50%) translateY(0)}
    
    @media(max-width:360px){.form-row{grid-template-columns:1fr}.actions{grid-template-columns:1fr 1fr}}
  </style>
</head>
<body>
  <div class="orb"></div><div class="orb"></div>
  <div class="card">
    <div class="form-row">
      <div class="form-group full">
        <label class="form-label">Tile Size & Thickness</label>
        <select id="sizeThickness" class="form-select"></select>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group full">
        <label class="form-label">Mode</label>
        <div class="mode-toggle" id="modeToggle">
          <div class="mode-option active" data-mode="area">Area (ft²)</div>
          <div class="mode-option" data-mode="pieces">Pieces</div>
        </div>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group full">
        <label class="form-label" id="inputLabel">Area (ft²)</label>
        <input id="quantity" type="number" class="form-input" placeholder="e.g. 2000" min="0" step="0.01">
      </div>
    </div>
    <div class="actions">
      <button class="btn btn-whatsapp" id="shareWhatsapp">
        <img src="whatsapp-icon.svg" alt="WhatsApp">WhatsApp
      </button>
      <button class="btn btn-sms" id="shareSMS">
        <img src="sms-icon.svg" alt="SMS">SMS
      </button>
      <button class="btn btn-email" id="shareEmail">
        <img src="email-icon.svg" alt="Email">Email
      </button>
    </div>
    <div class="results">
      <div class="result">
        <div class="label">Pieces</div>
        <div class="value" id="piecesResult">-</div>
      </div>
      <div class="result">
        <div class="label">Area (ft²)</div>
        <div class="value" id="areaFt2Result">-</div>
      </div>
      <div class="result">
        <div class="label">Area (m²)</div>
        <div class="value" id="areaM2Result">-</div>
      </div>
      <div class="result">
        <div class="label">Weight (tons)</div>
        <div class="value" id="weightResult">-</div>
      </div>
    </div>
    <div class="meta" id="resultsMeta">Select specs to calculate</div>
  </div>
  <div class="copy-msg" id="copyMessage">✓ Shared!</div>

<script>
  const SKU_MASTER=[{size:"1200x1200",thk:"9MM",pcs:2,kg:"61",ft2:31,m2:2.88},{size:"1200x1790",thk:"9MM",pcs:2,kg:"91",ft2:46.242,m2:4.296},{size:"1200x1800",thk:"9MM",pcs:2,kg:"91 TO 96.5",ft2:46.5,m2:4.32},{size:"1200x2400",thk:"9MM",pcs:1,kg:"62",ft2:31,m2:2.88},{size:"1200x2800",thk:"6MM",pcs:1,kg:"50.5",ft2:36.167,m2:3.36},{size:"1200x3180",thk:"15MM",pcs:1,kg:"136",ft2:41.075,m2:3.816},{size:"1200x3200",thk:"15MM",pcs:1,kg:"136",ft2:41.337,m2:3.84},{size:"1600x1600",thk:"9MM",pcs:1,kg:"55",ft2:27.556,m2:2.56},{size:"1600x3200",thk:"6MM",pcs:1,kg:"74",ft2:55.116,m2:5.12},{size:"1600x3200",thk:"12MM",pcs:1,kg:"148",ft2:55.116,m2:5.12},{size:"1620x3240",thk:"12MM",pcs:1,kg:"150",ft2:56.5,m2:5.249},{size:"790x2980",thk:"15MM",pcs:1,kg:"87",ft2:25.338,m2:2.354},{size:"800x3000",thk:"15MM",pcs:1,kg:"84.5",ft2:25.834,m2:2.4},{size:"800x2400",thk:"15MM",pcs:1,kg:"67.5",ft2:20.67,m2:1.9},{size:"1000x3000",thk:"5MM",pcs:1,kg:"35.5",ft2:32.29,m2:3},{size:"1200x2600",thk:"6MM",pcs:1,kg:"42.5",ft2:33.58,m2:3.1},{size:"1200x3000",thk:"9MM",pcs:1,kg:"77.5",ft2:38.75,m2:3.6},{size:"1200x3200",thk:"15MM",pcs:1,kg:"136",ft2:41.33,m2:3.8},{size:"800x3200",thk:"15MM",pcs:1,kg:"74",ft2:27.56,m2:2.6}];
  const FT2_PER_M2=10.7639;
  const fmtNum=v=>new Intl.NumberFormat('en-US',{maximumFractionDigits:2}).format(v);
  const fmt3=v=>new Intl.NumberFormat('en-US',{maximumFractionDigits:3}).format(v);

  let mode='area';
  const el=id=>document.getElementById(id);
  const sizeEl=el('sizeThickness'),qtyEl=el('quantity'),modeToggle=el('modeToggle');
  const piecesEl=el('piecesResult'),ft2El=el('areaFt2Result'),m2El=el('areaM2Result'),wtEl=el('weightResult'),metaEl=el('resultsMeta');
  const whatsappBtn=el('shareWhatsapp'),smsBtn=el('shareSMS'),emailBtn=el('shareEmail'),copyMsg=el('copyMessage');

  function init(){
    sizeEl.innerHTML=SKU_MASTER.map((sku,i)=>`<option value="${i}">${sku.size} (${sku.thk})</option>`).join('');
    const def=SKU_MASTER.findIndex(s=>s.size==="800x3000"&&s.thk==="15MM"); if(def>=0)sizeEl.selectedIndex=def;
    calculate();
  }

  function getSKU(){return SKU_MASTER[+sizeEl.value]}
  function calculate(){
    const sku=getSKU(),q=parseFloat(qtyEl.value)||0;
    if(!sku){reset();return;}
    const pcsBox=sku.pcs,ft2Box=sku.ft2,m2Box=sku.m2,kgBox=parseFloat((sku.kg+"").match(/[\d.]+/)[0]);
    let pieces=0,areaFt2=0,areaM2=0,wt=0;
    if(q>0){
      if(mode==='area'){areaFt2=q;pieces=Math.ceil(q/(ft2Box/pcsBox));areaM2=areaFt2/FT2_PER_M2;}
      else{pieces=Math.ceil(q);areaFt2=pieces*(ft2Box/pcsBox);areaM2=pieces*(m2Box/pcsBox);}
      wt=(pieces*(kgBox/pcsBox))/1000;
    }
    piecesEl.textContent=pieces?fmtNum(pieces):'-';
    ft2El.textContent=areaFt2?fmtNum(areaFt2):'-';
    m2El.textContent=areaM2?fmt3(areaM2):'-';
    wtEl.textContent=wt?fmt3(wt):'-';
    metaEl.textContent=`${pcsBox} pcs/box • ${ft2Box} ft²/box • ${m2Box} m²/box • ~${kgBox} kg/box`;
  }
  function reset(){[piecesEl,ft2El,m2El,wtEl].forEach(e=>e.textContent='-');metaEl.textContent='Select specs to calculate'}

  function setMode(m){
    mode=m;
    modeToggle.classList.toggle('pieces',m==='pieces');
    modeToggle.querySelectorAll('.mode-option').forEach(o=>o.classList.toggle('active',o.dataset.mode===m));
    el('inputLabel').textContent=m==='area'?'Area (ft²)':'Pieces';
    qtyEl.placeholder=m==='area'?'e.g. 2000':'e.g. 25';
    calculate();
  }

  function shareText(){
    const sku=getSKU();
    return `size:- ${sku.size} ${sku.thk}\nPieces:- ${piecesEl.textContent}\nArea (ft²):- ${ft2El.textContent}\nArea (m²):- ${m2El.textContent}\nWeight (tons):- ${wtEl.textContent}`;
  }
  whatsappBtn.onclick=()=>window.open(`https://wa.me/?text=${encodeURIComponent(shareText())}`,'_blank');
  smsBtn.onclick=()=>{const body=encodeURIComponent(shareText());window.location.href=navigator.userAgent.match(/iPhone|iPad/)?`sms:&body=${body}`:`sms:?body=${body}`};
  emailBtn.onclick=()=>{const s=encodeURIComponent('TilesPro Calc'),b=encodeURIComponent(shareText());window.location.href=`mailto:?subject=${s}&body=${b}`};

  modeToggle.onclick=e=>{const o=e.target.closest('.mode-option');if(o)setMode(o.dataset.mode)};
  [sizeEl,qtyEl].forEach(el=>el.addEventListener('input',calculate));
  
  init();
</script>
</body>
</html>
