<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tiles UI + Share Buttons</title>

  <style>
    :root{
      /* Theme — match existing UI palette here */
      --bg: #0e1116;
      --fg: #eaecef;
      --muted: #9aa4b2;
      --card: #151a21;
      --border: #232a33;
      --primary: #3b82f6; /* accent */
      --primary-2: #2563eb;
      --success: #22c55e;
      --wa: #25D366;
      --sms: #0ea5e9;
      --mail: #f59e0b;
      --shadow: 0 6px 20px rgba(0,0,0,0.35);
      --radius: 14px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: linear-gradient(180deg, #0d1218, #0b0f14);
      color:var(--fg);
      font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    }

    .container{
      width: min(1100px, 94vw);
      margin: 18px auto 22px;
    }

    /* ===== Existing UI (unchanged) ===== */
    .app-header{
      display:flex; align-items:center; justify-content:space-between;
      background: linear-gradient(180deg, rgba(59,130,246,0.12), rgba(59,130,246,0.02));
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:14px 16px;
      box-shadow: var(--shadow);
    }
    .title{
      font-size:18px; letter-spacing:0.2px;
    }
    .toolbar{
      display:flex; gap:10px;
    }
    .btn{
      background: #10161d;
      color:var(--fg);
      border:1px solid var(--border);
      border-radius:10px;
      padding:10px 12px;
      display:inline-flex; align-items:center; gap:8px;
      cursor:pointer; user-select:none;
      transition: all .2s ease;
    }
    .btn:hover{ border-color:#32404f; transform: translateY(-1px) }
    .grid{
      margin-top:14px;
      display:grid; gap:12px;
      grid-template-columns: repeat(12, 1fr);
    }
    .card{
      grid-column: span 6;
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:14px;
      box-shadow: var(--shadow);
    }
    .row{ display:flex; gap:12px; align-items:center; margin-top:8px }
    .input, .select{
      flex:1;
      background:#0f141a;
      border:1px solid var(--border);
      color:var(--fg);
      border-radius:10px;
      padding:10px 12px;
      outline:none;
    }
    .input:focus, .select:focus{ border-color:#2b3755; box-shadow: 0 0 0 3px rgba(59,130,246,0.15)}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px;
      border:1px solid var(--border);
      background:#0f141a;
      border-radius: 999px;
      color:var(--muted);
      font-size:12px;
    }
    .metric{
      margin-top:10px;
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .metric .kpi{
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0));
      border:1px solid var(--border);
      padding:10px 12px;
      border-radius:12px;
      min-width: 120px;
    }
    .kpi .label{ font-size:11px; color:var(--muted)}
    .kpi .val{ margin-top:4px; font-size:16px}

    @media (max-width: 900px){
      .card{ grid-column: span 12 }
    }

    /* ===== Share bar at bottom ===== */
    .share-bar{
      margin-top: 16px;
      position: sticky;
      bottom: 0;
      background: rgba(10,14,19,0.8);
      backdrop-filter: blur(10px);
      border:1px solid var(--border);
      border-radius: calc(var(--radius) + 2px);
      padding: 10px 12px;
      box-shadow: var(--shadow);
    }
    .share-wrap{
      display:flex; align-items:center; justify-content:center; gap:12px;
      flex-wrap: wrap;
    }
    .share-btn{
      width:56px; height:56px;
      border-radius:50%;
      display:inline-flex; align-items:center; justify-content:center;
      color:#fff; text-decoration:none;
      border:1px solid rgba(255,255,255,0.08);
      box-shadow: var(--shadow);
      transition: transform .15s ease, box-shadow .15s ease, filter .2s ease;
    }
    .share-btn:hover{ transform: translateY(-2px); filter: brightness(1.05) }
    .share-btn:active{ transform: translateY(0) }

    .share-btn svg{ width:24px; height:24px; display:block }

    .btn-wa { background: radial-gradient(120% 120% at 50% 0%, #29e67f 0%, #1fb15e 60%, #148c49 100%) }
    .btn-sms{ background: radial-gradient(120% 120% at 50% 0%, #22d3ee 0%, #0ea5e9 60%, #0369a1 100%) }
    .btn-mail{ background: radial-gradient(120% 120% at 50% 0%, #fbbf24 0%, #f59e0b 60%, #b45309 100%) }

    .share-label{
      width:100%;
      text-align:center;
      color:var(--muted);
      font-size:12px;
      margin-top:6px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ================= Existing UI (unchanged) ================= -->
    <header class="app-header" role="banner" aria-label="Header">
      <div class="title">Tiles Selection</div>
      <div class="toolbar">
        <button class="btn" id="btnCopy">
          <!-- copy icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M9 9.5A2.5 2.5 0 0 1 11.5 7h6A2.5 2.5 0 0 1 20 9.5v6A2.5 2.5 0 0 1 17.5 18h-6A2.5 2.5 0 0 1 9 15.5v-6Z" stroke="currentColor" stroke-width="1.5"/>
            <path d="M7 15.5A2.5 2.5 0 0 1 4.5 13v-6A2.5 2.5 0 0 1 7 4.5h6" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          Copy
        </button>
        <button class="btn" id="btnClear">
          <!-- clear icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M5 7h14M9 7l.8 11.2A2 2 0 0 0 11.8 20h.4a2 2 0 0 0 2-1.8L15 7M10 7l1-3h2l1 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          Clear
        </button>
      </div>
    </header>

    <section class="grid" aria-label="Inputs">
      <div class="card">
        <div class="pill">Order • Live calc</div>
        <div class="row">
          <select class="select" id="size">
            <option value="600x600">600 x 600</option>
            <option value="800x800">800 x 800</option>
            <option value="600x1200">600 x 1200</option>
          </select>
          <select class="select" id="thickness">
            <option value="8">8 mm</option>
            <option value="10">10 mm</option>
            <option value="12">12 mm</option>
          </select>
          <input class="input" id="area" type="number" step="0.01" placeholder="Area (sq ft)" />
        </div>
        <div class="metric">
          <div class="kpi">
            <div class="label">Per-piece area</div>
            <div class="val" id="kpiPcs">—</div>
          </div>
          <div class="kpi">
            <div class="label">Total qty (pcs)</div>
            <div class="val" id="kpiQty">—</div>
          </div>
          <div class="kpi">
            <div class="label">Weight (tons)</div>
            <div class="val" id="kpiTons">—</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="pill">Preview</div>
        <div id="preview" style="margin-top:8px; color:var(--muted)">Selections will appear here…</div>
      </div>
    </section>

    <!-- ================= Bottom Share Buttons (added) ================= -->
    <nav class="share-bar" role="navigation" aria-label="Share actions">
      <div class="share-wrap">
        <a class="share-btn btn-wa" id="btnWA" href="#" aria-label="Share on WhatsApp" title="WhatsApp">
          <!-- WhatsApp icon -->
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M20.5 3.5A11 11 0 0 0 3.1 16.8L2 22l5.4-1.1A11 11 0 1 0 20.5 3.5Zm-8.4 16a9 9 0 0 1-4.6-1.3l-.3-.2-3 .6.6-3-.2-.3a9 9 0 1 1 7.5 4.2Zm4.9-6.7c-.3-.2-1.8-.9-2-.9s-.5-.1-.7.2-.8.9-1 .9-.5 0-.8-.3-1.1-.9-1.6-1.5-1.1-1.5-1.2-1.8 0-.6.2-.8.3-.5.5-.7c.2-.2.3-.4.2-.7s-.7-2-1-2.7c-.3-.7-.6-.6-.8-.6h-.7c-.2 0-.7.1-1.1.5s-1.5 1.5-1.5 3.6 1.6 4.2 1.8 4.5 3 4.7 7.1 6.4c1 .4 1.8.6 2.4.8 1 .3 2 0 2.8-.6s1.3-1.7 1.5-2.4.1-1.1 0-1.2-.3-.2-.6-.4Z"/>
          </svg>
        </a>
        <a class="share-btn btn-sms" id="btnSMS" href="#" aria-label="Share via SMS" title="SMS">
          <!-- SMS icon -->
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M4 4h16a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H9.4L5 21v-4H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm2 5h12v2H6V9Zm0-3h12v2H6V6Zm0 6h9v2H6v-2Z"/>
          </svg>
        </a>
        <a class="share-btn btn-mail" id="btnMail" href="#" aria-label="Share via Email" title="Email">
          <!-- Mail icon -->
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M3 5h18a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Zm0 2v.4l9 5.6 9-5.6V7H3Zm18 10V9.3l-8.4 5.2a2 2 0 0 1-2.2 0L2 9.3V17h19Z"/>
          </svg>
        </a>

        <div class="share-label">Share order summary</div>
      </div>
    </nav>
  </div>

  <script>
    // ===== Mock calculation (replace with existing logic) =====
    const elSize = document.getElementById('size');
    const elThk = document.getElementById('thickness');
    const elArea = document.getElementById('area');
    const elPcs = document.getElementById('kpiPcs');
    const elQty = document.getElementById('kpiQty');
    const elTons = document.getElementById('kpiTons');
    const elPreview = document.getElementById('preview');

    function perPieceSqft(size){
      // parse e.g. "600x600" -> m^2 -> sqft
      const [wmm, hmm] = size.split('x').map(Number);
      const sqm = (wmm/1000) * (hmm/1000);
      const sqft = sqm * 10.7639;
      return sqft;
    }
    function weightTons(size, thicknessMM, qty){
      // rough density estimate: 2.2 g/cc; tile volume = w*h*thk; result in tons
      const [wmm, hmm] = size.split('x').map(Number);
      const vol_m3 = (wmm/1000) * (hmm/1000) * (thicknessMM/1000) * qty;
      const kg = vol_m3 * 2200; // 2.2 t/m^3
      return kg/1000; // tons
    }
    function recompute(){
      const size = elSize.value;
      const thk = Number(elThk.value || 0);
      const area = Number(elArea.value || 0);

      const per = perPieceSqft(size);
      const qty = per ? Math.max(0, Math.ceil(area / per)) : 0;
      const tons = qty ? weightTons(size, thk, qty) : 0;

      elPcs.textContent = per ? per.toFixed(2) + ' sq ft' : '—';
      elQty.textContent = qty ? qty + ' pcs' : '—';
      elTons.textContent = tons ? tons.toFixed(3) + ' t' : '—';

      elPreview.textContent = `Size: ${size}, Thickness: ${thk} mm, Area: ${area || 0} sq ft, Qty: ${qty || 0} pcs, Weight: ${tons ? tons.toFixed(3) : 0} t`;
    }
    [elSize, elThk, elArea].forEach(el => el.addEventListener('input', recompute));
    recompute();

    // ===== Copy / Clear (existing actions) =====
    document.getElementById('btnCopy').addEventListener('click', async () => {
      try{
        await navigator.clipboard.writeText(document.getElementById('preview').textContent);
        toast('Copied!');
      }catch(e){ toast('Copy failed'); }
    });
    document.getElementById('btnClear').addEventListener('click', () => {
      elArea.value = '';
      recompute();
      toast('Cleared');
    });

    function toast(msg){
      let t = document.getElementById('toast');
      if(!t){
        t = document.createElement('div');
        t.id='toast';
        Object.assign(t.style,{
          position:'fixed', left:'50%', bottom:'24px', transform:'translateX(-50%)',
          background:'#0b1117', color:'#fff', border:'1px solid #273244',
          borderRadius:'12px', padding:'10px 14px', zIndex:9999,
          boxShadow:'0 8px 30px rgba(0,0,0,0.4)', fontSize:'13px'
        });
        document.body.appendChild(t);
      }
      t.textContent = msg;
      t.style.opacity='1';
      clearTimeout(t._to);
      t._to = setTimeout(()=>{ t.style.opacity='0' }, 1400);
    }

    // ===== Share helpers =====
    function makeSubject(){
      return `Tiles Order • ${new Date().toLocaleDateString()}`;
    }
    function makeShareText(){
      const size = elSize.value;
      const thk = elThk.value;
      const area = elArea.value || 0;
      const per = elPcs.textContent;
      const qty = elQty.textContent;
      const wt = elTons.textContent;
      return [
        'Tiles Order Details',
        `Size: ${size}`,
        `Thickness: ${thk} mm`,
        `Area: ${area} sq ft`,
        `Per-piece area: ${per}`,
        `Qty: ${qty}`,
        `Weight: ${wt}`
      ].join('\n');
    }
    function isiOS(){
      return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    }

    // Use Web Share API if available
    async function tryWebShare(){
      if(navigator.share){
        try{
          await navigator.share({ title: makeSubject(), text: makeShareText() });
          toast('Shared');
          return true;
        }catch(e){ /* user canceled or not supported for this payload */ }
      }
      return false;
    }

    // Wire buttons
    const btnWA = document.getElementById('btnWA');
    const btnSMS = document.getElementById('btnSMS');
    const btnMail = document.getElementById('btnMail');

    btnWA.addEventListener('click', async (e) => {
      e.preventDefault();
      const shared = await tryWebShare();
      if(shared) return;
      // App scheme for WhatsApp (avoids http links)
      const text = encodeURIComponent(makeShareText());
      const href = `whatsapp://send?text=${text}`;
      window.location.href = href;
    });

    btnSMS.addEventListener('click', async (e) => {
      e.preventDefault();
      const shared = await tryWebShare();
      if(shared) return;
      const sep = isiOS() ? '&' : '?';
      const href = `sms:${sep}body=${encodeURIComponent(makeShareText())}`;
      window.location.href = href;
    });

    btnMail.addEventListener('click', async (e) => {
      e.preventDefault();
      const shared = await tryWebShare();
      if(shared) return;
      const subject = encodeURIComponent(makeSubject());
      const body = encodeURIComponent(makeShareText());
      const href = `mailto:?subject=${subject}&body=${body}`;
      window.location.href = href;
    });
  </script>
</body>
</html>
